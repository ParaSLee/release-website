# 02 - 需求分析

**版本**: v1.0.0  
**最后更新**: 2024

---

## 1. 用户痛点分析

### 1.1 核心痛点

#### P1 - 自制力不足
**问题描述**：用户明知道应该专注学习/工作，但还是忍不住打开娱乐网站。

**用户反馈**：
- "我打开浏览器就想刷B站"
- "本来只想看5分钟新闻，结果看了1小时"
- "工作时总是不由自主地开小差"

**影响范围**：90%的目标用户

#### P2 - 时间失控感
**问题描述**：不知不觉浪费大量时间，事后才意识到。

**用户反馈**：
- "完全不知道自己在某个网站上花了多少时间"
- "一天结束后发现什么都没做"
- "时间都不知道去哪了"

**影响范围**：85%的目标用户

#### P3 - 现有工具过于严格或过于宽松
**问题描述**：市面工具要么太严格（完全无法访问），要么太宽松（轻易绕过）。

**用户反馈**：
- "StayFocusd太严格了，有急事也无法访问"
- "其他工具太容易关闭，形同虚设"
- "需要一个有弹性但又有约束力的工具"

**影响范围**：70%的目标用户

### 1.2 次要痛点

#### P4 - 缺乏正向激励
- 现有工具只有"禁止"，没有"鼓励"
- 缺少进步的可视化反馈

#### P5 - UI老旧
- 大部分工具界面陈旧
- 用户体验不佳

#### P6 - 跨设备不同步
- 无法在多设备间同步配置
- 切换设备后需要重新设置

---

## 2. 功能需求列表

### 2.1 P0级需求（必须实现）

#### F1 - 基础时间限制
**需求描述**：为每个网站设置每日使用时间上限。

**用户故事**：
- 作为学生，我想限制YouTube每天只能看30分钟
- 作为职场人士，我想限制新闻网站每天1小时

**验收标准**：
- ✅ 可以添加/删除/编辑网站
- ✅ 可以为每个网站设置时间（分钟/小时）
- ✅ 时间到达后自动阻止访问
- ✅ 每日自动重置

**优先级**：P0

#### F2 - 跨Tab时间同步
**需求描述**：多个Tab访问同一网站时，时间累加计算。

**用户故事**：
- 我在Tab1看了10分钟YouTube
- 我切换到Tab2继续看YouTube
- Tab2应该显示剩余时间是50分钟（假设限制1小时）

**验收标准**：
- ✅ 多个Tab共享同一个倒计时
- ✅ 切换Tab时时间正确同步
- ✅ 只有当前活跃的Tab才计时

**优先级**：P0

#### F3 - 三状态管理系统
**需求描述**：Active（可使用）→ Pending（待锁定）→ Locked（已锁定）的状态流转。

**验收标准**：
- ✅ 时间到达时进入Pending状态
- ✅ 30秒后或点击锁定按钮进入Locked状态
- ✅ 重启后回到Active状态

**优先级**：P0

#### F4 - 30秒待锁定缓冲
**需求描述**：时间到达时给予30秒缓冲期，而非立即锁定。

**用户故事**：
- 我正在看重要内容，突然被锁定很不友好
- 给我30秒时间保存/关闭当前内容

**验收标准**：
- ✅ 全屏毛玻璃遮罩
- ✅ 30秒倒计时显示
- ✅ 紧急使用按钮（+10分钟）
- ✅ 立即锁定按钮
- ✅ 模糊度动态变化

**优先级**：P0

#### F5 - 多层验证重启机制
**需求描述**：提供重启功能，但增加多层验证以避免滥用。

**用户故事**：
- 我确实有紧急需求需要访问
- 但重启应该有一定难度，避免我轻易放弃

**验收标准**：
- ✅ 第一层：重启按钮
- ✅ 第二层：10秒倒计时 + 警告文案
- ✅ 第三层：120个单词输入验证
- ✅ 紧急重启：每日一次全局限制
- ✅ 取消操作显示礼花效果

**优先级**：P0

#### F6 - 固定时间锁定
**需求描述**：设置固定时间段（如睡眠时间）禁止访问网站。

**用户故事**：
- 我想在22:00-06:00睡眠时间完全禁止访问娱乐网站
- 即使还有剩余时间也不能访问

**验收标准**：
- ✅ 支持多个时间段
- ✅ 支持跨午夜时间段
- ✅ 两种模式：特定网站 / 所有HTTP/HTTPS
- ✅ 可以启用/禁用

**优先级**：P0

#### F7 - 倒计时悬浮窗
**需求描述**：在页面右下角显示倒计时悬浮窗。

**验收标准**：
- ✅ macOS毛玻璃效果
- ✅ 展开/收起两种状态
- ✅ 支持拖拽
- ✅ 在Pending/Locked状态时隐藏

**优先级**：P0

#### F8 - Options配置页面
**需求描述**：完整的配置管理界面。

**验收标准**：
- ✅ 侧边栏导航（4个Tab）
- ✅ 使用限制Tab
- ✅ 固定时间限制Tab
- ✅ 重置配置Tab
- ✅ 数据管理Tab

**优先级**：P0

### 2.2 P1级需求（重要但非紧急）

#### F9 - 数据导入/导出
**需求描述**：支持配置数据的备份和恢复。

**优先级**：P1

#### F10 - 使用统计图表
**需求描述**：在阻止页面显示使用统计。

**优先级**：P1

#### F11 - 励志语句随机显示
**需求描述**：在阻止页面和重启弹窗显示励志语句。

**优先级**：P1

### 2.3 P2级需求（可选）

#### F12 - 暗色模式
**优先级**：P2

#### F13 - 初次使用引导
**优先级**：P2

---

## 3. 非功能需求

### 3.1 性能需求

#### NF1 - 页面加载性能
- Content Script注入后，页面加载时间增加不超过100ms
- 悬浮窗渲染时间 < 50ms

#### NF2 - 内存占用
- Background Service内存占用 < 50MB
- Content Script内存占用 < 10MB

#### NF3 - 动画流畅度
- 所有动画保持60FPS
- 毛玻璃效果不卡顿

### 3.2 可用性需求

#### NF4 - 易用性
- 新用户5分钟内能完成基础配置
- 所有操作都有明确反馈
- 错误提示清晰友好

#### NF5 - 可访问性
- 支持键盘导航
- 颜色对比度符合WCAG标准
- 适配屏幕阅读器

### 3.3 可靠性需求

#### NF6 - 数据安全
- 所有数据本地存储
- 定期自动备份
- 数据导入/导出时验证完整性

#### NF7 - 稳定性
- 崩溃率 < 0.1%
- 数据丢失率 < 0.01%

### 3.4 兼容性需求

#### NF8 - 浏览器兼容
- Chrome 90+
- Edge 90+（基于Chromium）
- 未来支持Firefox

#### NF9 - 屏幕分辨率
- 支持1280x720及以上分辨率
- 响应式设计

---

## 4. 使用场景

### 4.1 场景1：学生备考

**角色**：张同学，22岁，大学生，准备考研

**场景描述**：
1. 张同学打开Options Page
2. 添加B站、微博、知乎到限制清单
3. 分别设置每日30分钟、20分钟、40分钟
4. 设置固定时间锁定：22:00-06:00（睡眠时间）
5. 设置每日重置时间：06:00

**使用过程**：
1. 上午学习时，忍不住想刷B站
2. 打开B站，看到右下角悬浮窗显示：今日剩余30分钟
3. 看了20分钟，收起悬浮窗继续学习
4. 下午又看了10分钟，时间用完
5. 页面进入30秒待锁定状态，全屏毛玻璃遮罩
6. 张同学看到倒计时和励志语句，决定不使用紧急功能
7. 30秒后自动跳转到阻止页面
8. 看到"恭喜你的坚持！"和使用统计图表
9. 受到激励，继续学习

**期望结果**：
- 成功限制娱乐时间
- 没有强制感，有正向激励
- 养成良好习惯

### 4.2 场景2：职场人士工作时间

**角色**：李女士，30岁，产品经理

**场景描述**：
1. 李女士上班前打开插件
2. 已配置新闻网站、购物网站限制
3. 设置固定时间锁定：09:00-12:00、14:00-18:00（工作时间）

**使用过程**：
1. 10:00工作中，想看新闻网站放松一下
2. 打开网站，立即进入待锁定状态（固定时间锁定）
3. 看到提示：当前处于工作时间锁定期
4. 想起确实是工作时间，点击"锁定"按钮
5. 跳转到阻止页面，看到励志语句
6. 重新专注工作

**期望结果**：
- 工作时间保持专注
- 固定时间锁定生效
- 温和提醒而非强制

### 4.3 场景3：紧急情况使用重启

**角色**：王先生，35岁，自由设计师

**场景描述**：
1. 王先生设置YouTube每天1小时
2. 今天已经看完1小时
3. 但客户突然要求参考YouTube上的一个案例

**使用过程**：
1. 打开YouTube，进入Locked状态，显示阻止页面
2. 点击"重启"按钮
3. 第一个弹窗出现，显示警告和励志语句
4. 看到三个按钮：确定重启、紧急重启、取消
5. 因为确实紧急，点击"紧急重启"（今日还未使用过）
6. 立即重启成功，YouTube可以访问
7. 悬浮窗显示：已重启（标记）
8. 快速找到客户要的案例，5分钟后关闭
9. 看到紧急重启已用，意识到要珍惜这次机会

**期望结果**：
- 紧急情况得到满足
- 但有心理负担（每日一次限制）
- 不会滥用

### 4.4 场景4：重复尝试重启

**角色**：赵同学，20岁，大学生

**场景描述**：
1. 赵同学刷微博时间用完
2. 很想继续刷，尝试重启

**使用过程**：
1. 点击重启按钮
2. 第一个弹窗，等待10秒（心里犹豫）
3. 10秒后，点击"确定重启"
4. 第二个弹窗，显示120个随机单词
5. 开始输入，输入到第30个单词时
6. 突然意识到：我为了刷微博要输入120个单词？
7. 点击"取消"按钮
8. 看到满屏礼花效果："恭喜你的坚持！"
9. 感到被鼓励，关闭浏览器去学习

**期望结果**：
- 多层验证增加"重启成本"
- 让用户在过程中重新思考
- 取消操作也得到正向反馈

---

## 5. 竞品分析

### 5.1 主要竞品

#### StayFocusd
**优势**：
- 老牌产品，用户基数大
- 功能完善

**劣势**：
- UI老旧
- 过于严格，缺乏人性化
- 无法紧急访问

**市场份额**：Chrome商店1M+用户

#### LeechBlock
**优势**：
- 支持多浏览器
- 配置灵活

**劣势**：
- UI极其老旧
- 配置复杂
- 用户体验差

**市场份额**：Firefox 200K+用户

#### Cold Turkey
**优势**：
- 功能强大
- 支持跨平台

**劣势**：
- 收费产品
- 过于复杂
- 重启机制过于严格

**市场份额**：小众产品

### 5.2 差异化优势

| 维度 | Website Block | StayFocusd | LeechBlock | Cold Turkey |
|-----|---------------|------------|------------|-------------|
| **易用性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| **UI设计** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐ | ⭐⭐⭐⭐ |
| **人性化** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐ |
| **功能完整性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **价格** | 免费 | 免费 | 免费 | $39 |

**核心差异化**：
1. 30秒缓冲期 - 独有
2. 多层验证重启 - 独有
3. 礼花激励效果 - 独有
4. macOS毛玻璃UI - 业界领先

---

## 6. 需求优先级总结

### 6.1 v1.0.0必须实现（P0）
- [x] F1：基础时间限制
- [x] F2：跨Tab时间同步
- [x] F3：三状态管理系统
- [x] F4：30秒待锁定缓冲
- [x] F5：多层验证重启机制
- [x] F6：固定时间锁定
- [x] F7：倒计时悬浮窗
- [x] F8：Options配置页面

### 6.2 v1.0.0尽量实现（P1）
- [ ] F9：数据导入/导出
- [ ] F10：使用统计图表
- [ ] F11：励志语句

### 6.3 未来版本（P2）
- [ ] F12：暗色模式
- [ ] F13：初次使用引导

---

**文档版本**: v1.0.0  
**维护者**: ParaSLee  
**最后更新**: 2024
