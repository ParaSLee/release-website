# 07 - 用户流程图

**版本**: v1.0.0  
**最后更新**: 2024

---

## 1. 三状态流转图

```
┌──────────────────────────────────────────────┐
│                                              │
│              Active (可使用)                  │
│                                              │
│  • 正常计时                                   │
│  • 显示倒计时悬浮窗                           │
│  • 可以访问网站                               │
│                                              │
└────────┬─────────────────────────────────────┘
         │
         │ 时间到达上限 OR
         │ 进入固定时间锁定期
         ↓
┌──────────────────────────────────────────────┐
│                                              │
│            Pending (待锁定)                   │
│                                              │
│  • 显示全屏毛玻璃遮罩                         │
│  • 30秒倒计时                                 │
│  • 提供紧急使用按钮                           │
│  • 提供立即锁定按钮                           │
│                                              │
└─────┬────────────────────────────┬───────────┘
      │                            │
      │ 30秒倒计时结束 OR           │ 紧急使用
      │ 点击立即锁定               │ (+10分钟)
      ↓                            ↓
┌──────────────────────────┐   ┌──────────────┐
│                          │   │              │
│    Locked (已锁定)        │   │   Active     │
│                          │   │              │
│  • 跳转到阻止页面         │   └──────────────┘
│  • 显示励志语句           │
│  • 提供重启按钮           │
│                          │
└────────┬─────────────────┘
         │
         │ 重启功能
         │ (多层验证)
         ↓
    ┌──────────┐
    │  Active  │
    └──────────┘
```

---

## 2. 重启流程详细图

```
用户在阻止页面点击"重启"
         ↓
┌─────────────────────────────┐
│  第一个弹窗                   │
│                             │
│  警告文案 + 励志语句           │
│                             │
│  ┌───────────────────────┐  │
│  │ 确定重启 (10秒倒计时)  │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 紧急重启 (今日限1次)   │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │ 取消重启               │  │
│  └───────────────────────┘  │
└─────┬─────────┬─────────┬───┘
      │         │         │
      │         │         │ 取消
      │         │         └──→ 礼花效果
      │         │
      │         │ 紧急重启
      │         └──→ 检查是否已用
      │                 ├─ 未用 → 立即重启
      │                 └─ 已用 → 提示"今日已使用"
      │
      │ 等待10秒后点击确定重启
      ↓
┌─────────────────────────────┐
│  第二个弹窗                   │
│                             │
│  显示120个随机单词             │
│                             │
│  ┌───────────────────────┐  │
│  │ 用户输入框             │  │
│  │ 实时验证匹配度          │  │
│  └───────────────────────┘  │
│                             │
│  ┌──────┐      ┌──────┐    │
│  │ 确定 │      │ 取消 │    │
│  └──────┘      └──────┘    │
└─────┬──────────────┬────────┘
      │              │
      │ 输入匹配     │ 取消
      ↓              └──→ 礼花效果
执行重启
      ↓
  Active状态
```

---

## 3. 完整使用流程

```
1. 用户安装插件
      ↓
2. 打开Options Page
      ↓
3. 添加受限网站
   - 输入域名
   - 设置时间限制
   - 保存配置
      ↓
4. (可选)配置固定时间锁定
   - 添加时间段
   - 选择限制模式
      ↓
5. 访问受限网站
      ↓
6. 系统开始计时
   - 显示倒计时悬浮窗
   - 右下角可拖拽
      ↓
7. 时间到达上限
      ↓
8. 进入Pending状态
   - 全屏毛玻璃遮罩
   - 30秒倒计时
   - 用户选择:
     ├─ 等待 → Locked
     ├─ 紧急使用 → Active
     └─ 立即锁定 → Locked
      ↓
9. Locked状态
   - 显示阻止页面
   - 励志语句
   - 使用统计
      ↓
10. (可选)使用重启功能
    - 第一个弹窗选择
    - 第二个弹窗验证
    - 重启成功
      ↓
11. 第二天自动重置
```

---

**文档版本**: v1.0.0  
**维护者**: ParaSLee  
**最后更新**: 2024
